# Spring Boot Quartz Configuration Example
spring:
  quartz:
    # Job store type: memory or jdbc
    job-store-type: jdbc
    
    # JDBC job store properties
    jdbc:
      # Initialize database schema
      initialize-schema: always
      # Schema script location (optional)
      # schema: classpath:org/quartz/impl/jdbcjobstore/tables_@@platform@@.sql
    
    # Thread pool properties
    thread-pool:
      thread-count: 10
      thread-priority: 5
      threads-inherit-context-class-loader-of-initializing-thread: true
    
    # Scheduler properties
    properties:
      org:
        quartz:
          scheduler:
            # Scheduler instance name
            instanceName: QuartzMonitorScheduler
            # Scheduler instance ID (AUTO for automatic generation)
            instanceId: AUTO
            # Make scheduler instance ID unique for each instance
            makeSchedulerThreadDaemon: true
            # Skip update check
            skipUpdateCheck: true
          
          # Job store configuration
          jobStore:
            # Use database for job storage
            class: org.quartz.impl.jdbcjobstore.JobStoreTX
            # Database driver delegate class
            driverDelegateClass: org.quartz.impl.jdbcjobstore.StdJDBCDelegate
            # Table prefix
            tablePrefix: QRTZ_
            # Clustering support
            isClustered: true
            # Cluster check-in interval (in milliseconds)
            clusterCheckinInterval: 20000
            # Maximum misfired triggers to handle at a time
            maxMisfiresToHandleAtATime: 20
            # Don't fire triggers when acquiring them
            acquireTriggersWithinLock: false
            
          # Thread pool configuration
          threadPool:
            class: org.quartz.simpl.SimpleThreadPool
            threadCount: 10
            threadPriority: 5
            
    # Startup delay (in seconds)
    startup-delay: 0
    
    # Wait for jobs to complete on shutdown
    wait-for-jobs-to-complete-on-shutdown: true
    
    # Overwrite existing jobs
    overwrite-existing-jobs: false
    
  # DataSource configuration for Quartz (if using JDBC job store)
  datasource:
    # Use H2 for development/testing
    url: jdbc:h2:mem:quartzdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: 
    
    # Or use MySQL for production
    # url: jdbc:mysql://localhost:3306/quartz?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=UTC
    # driver-class-name: com.mysql.cj.jdbc.Driver
    # username: quartz
    # password: quartz123
    
    # Connection pool configuration
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 600000
      connection-timeout: 30000
      max-lifetime: 1800000

# Logging configuration for debugging
logging:
  level:
    org.quartz: DEBUG
    org.springframework.scheduling.quartz: DEBUG 